<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Retrieve data for Sunsynk solar power inverters • sunsynkr</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Retrieve data for Sunsynk solar power inverters">
<meta name="description" content="`sunsynkr` helps you to acquire information about Sunsynk photovoltaic systems from their API. If you have a Sunsynk inverter and an account to view and manage it on SunsynkConnect, you should be able to use this package to retrieve information about your plant. Note that this package is unofficial and is in no way associated with Sunsynk. It may stop working (or return misleading outputs) at any time and without warning.">
<meta property="og:description" content="`sunsynkr` helps you to acquire information about Sunsynk photovoltaic systems from their API. If you have a Sunsynk inverter and an account to view and manage it on SunsynkConnect, you should be able to use this package to retrieve information about your plant. Note that this package is unofficial and is in no way associated with Sunsynk. It may stop working (or return misleading outputs) at any time and without warning.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">sunsynkr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/using_sunsynkr.html">Using sunsynkr</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="sunsynkr">sunsynkr<a class="anchor" aria-label="anchor" href="#sunsynkr"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p><code>sunsynkr</code> is an R package to help you acquire information about Sunsynk photovoltaic systems from their API. If you have a Sunsynk inverter and an account to view and manage it on <a href="https://sunsynk.net/" class="external-link">SunsynkConnect</a>, you should be able to use this package to retrieve information about your plant.</p>
<p>Note that this package is unofficial and is in no way associated with Sunsynk. It may stop working (or return misleading outputs) at any time and without warning.</p>
<p>Also note that this package is currently at an early stage of development. Functions may not work as specified and things may change fundamentally in future versions.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>From R, you can install the current release of <code>sunsynkr</code> like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"DavidASmith/sunsynkr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-usage">Example usage<a class="anchor" aria-label="anchor" href="#example-usage"></a>
</h2>
<p>First, load the package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://davidasmith.github.io/sunsynkr/">sunsynkr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="authentication">Authentication<a class="anchor" aria-label="anchor" href="#authentication"></a>
</h3>
<p>You must configure environment variables to hold your sunsynk username and password (the ones you use to login to SunsynkConnect at <a href="https://sunsynk.net/" class="external-link uri">https://sunsynk.net/</a>). Configure the following environment variables:</p>
<ul>
<li><code>SUNSYNK_USER</code></li>
<li><code>SUNSYNK_PASS</code></li>
</ul>
</div>
<div class="section level3">
<h3 id="get-a-token">Get a token<a class="anchor" aria-label="anchor" href="#get-a-token"></a>
</h3>
<p>All <code>sunsynkr</code> functions which call the API require a token as an argument. Accordingly, you must first acquire an authentication token.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">token</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_token.html">get_token</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">token</span></span>
<span><span class="co">#&gt; Sunsynk API token - Success </span></span>
<span><span class="co">#&gt; Type:  bearer</span></span>
<span><span class="co">#&gt; Scope: all</span></span></code></pre></div>
<p>You can now use this token to authenticate other <code>susynkr</code> functions to the API.</p>
</div>
<div class="section level3">
<h3 id="get-plants-details">Get plants details<a class="anchor" aria-label="anchor" href="#get-plants-details"></a>
</h3>
<p>You can now get details of all plants associated with your account.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plants</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_plants.html">get_plants</a></span><span class="op">(</span><span class="va">token</span><span class="op">)</span></span></code></pre></div>
<p>Printing the <code>sunsynkr_plants</code> object returns a tibble summarising the information available for each plant.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plants</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 7</span></span>
<span><span class="co">#&gt;   id     name        address                         pac etoday etotal update_at</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;                         &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;    </span></span>
<span><span class="co">#&gt; 1 XXXXXX XXXXX XXXXX XX XXXXXXX XX, XXXXXXXXX XXX…     0   24.7  7370. 2024-07-…</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="flow">Flow<a class="anchor" aria-label="anchor" href="#flow"></a>
</h3>
<p>We can query the most recent power flow from the API for a given plant. We can extract the plant from <code>plants</code> like this.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plant_id</span> <span class="op">&lt;-</span> <span class="va">plants</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">infos</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">id</span></span></code></pre></div>
<p>Then, we can obtain the power flow for the plant.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flow</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_flow.html">get_flow</a></span><span class="op">(</span><span class="va">token</span>, </span>
<span>                 <span class="va">plant_id</span><span class="op">)</span></span></code></pre></div>
<p>Printing the <code>sunsynkr_flow</code> object outputs a representation of the power flows managed by the inverter.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flow</span></span>
<span><span class="co">#&gt;   PV    0W -----                --&lt;--   17W Grid</span></span>
<span><span class="co">#&gt;                |    -------     |</span></span>
<span><span class="co">#&gt;                -----|     |--&lt;--</span></span>
<span><span class="co">#&gt;                     | Inv |</span></span>
<span><span class="co">#&gt;                --&gt;--|     |--&gt;--</span></span>
<span><span class="co">#&gt;                |    -------     |</span></span>
<span><span class="co">#&gt; BATT  188W --&gt;--                --&gt;--  194W Load</span></span>
<span><span class="co">#&gt;      (88%)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="day-summary">Day summary<a class="anchor" aria-label="anchor" href="#day-summary"></a>
</h3>
<p>You can return a summary of all power flows (and battery state of charge) at five minute intervals for a given day.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/now.html" class="external-link">today</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">days</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">day_summary_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_day_summary_table.html">get_day_summary_table</a></span><span class="op">(</span><span class="va">token</span>, </span>
<span>                                           <span class="va">plant_id</span>, </span>
<span>                                           <span class="va">date</span><span class="op">)</span></span>
<span></span>
<span><span class="va">day_summary_table</span></span>
<span><span class="co">#&gt; # A tibble: 288 × 6</span></span>
<span><span class="co">#&gt;    dt                   pv_w battery_w `soc_%` load_w grid_w</span></span>
<span><span class="co">#&gt;    &lt;dttm&gt;              &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 2024-07-29 00:00:00     0        19      90    167    152</span></span>
<span><span class="co">#&gt;  2 2024-07-29 00:05:00     0        19      90    165    150</span></span>
<span><span class="co">#&gt;  3 2024-07-29 00:10:00     0        21      90    166    150</span></span>
<span><span class="co">#&gt;  4 2024-07-29 00:15:00     0        19      90    166    153</span></span>
<span><span class="co">#&gt;  5 2024-07-29 00:20:00     0        21      90    163    150</span></span>
<span><span class="co">#&gt;  6 2024-07-29 00:25:00     0        21      90    165    145</span></span>
<span><span class="co">#&gt;  7 2024-07-29 00:30:00     0        18      90    164    149</span></span>
<span><span class="co">#&gt;  8 2024-07-29 00:35:00     0        20      90    164    146</span></span>
<span><span class="co">#&gt;  9 2024-07-29 00:40:00     0        17      90    163    148</span></span>
<span><span class="co">#&gt; 10 2024-07-29 00:45:00     0        20      90    164    147</span></span>
<span><span class="co">#&gt; # ℹ 278 more rows</span></span></code></pre></div>
<p>You can also generate a plot of the day summary table.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">day_summary_table</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-11-1.png" width="100%"></p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing sunsynkr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>David Smith <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0009-0000-8482-3220" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
